{% extends 'blog/base.html' %}

{% load staticfiles %}

<!-- Страница всех постов: / или /page/2/ -->
{% block content %}
    <div class="row">
        <div class="col-md-8">
            {% for post in posts %}
                <div class="post">
                    <div class="date">
                        {{ post.published_date }}
                    </div>
                    <h3><a href="{% url 'blog:post_detail' pk=post.pk %}">{{ post.title }}</a></h3>
                    <p>{{ post.text|truncatechars:200 }}</p>
                    <a href="{% url 'blog:post_detail' pk=post.pk %}">Comments: {{ post.approved_comments.count }}</a>
                    <p style="float: right;">
                            <a href="{% url 'blog:add_like' pk=post.pk page=posts.number %}"><img src="{% static 'images/Like.png' %}" width="25px" height="25px"></a>
                        {{ post.likes }}
                    </p>
                </div>
                <hr>
            {% endfor %}
        </div>
    </div>
    <div class="row">
        <div class="col-lg-3 col-lg-offset-5">
            <ul class="pagination">
                {% if posts.has_previous %}
                    <li class="arrow"><a href="{% url 'blog:page_post_list' posts.previous_page_number %}">&laquo;</a></li>
                {% else %}
                    <li class="arrow"><a href="">&laquo;</a></li>
                {% endif %}
                {% for page in posts.paginator.page_range %}
                    {% if page == posts.number %}
                        <li class="active"><a href="{% url 'blog:page_post_list' page %}">{{ page }}</a></li>
                    {% else %}
                        <li><a href="{% url 'blog:page_post_list' page %}">{{ page }}</a></li>
                    {% endif %}
                {% endfor %}
                {% if posts.has_next %}
                    <li class="arrow"><a href="{% url 'blog:page_post_list' posts.next_page_number %}">&raquo;</a></li>
                {% else %}
                    <li class="arrow"><a href="">&raquo;</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
{% endblock %}